@model JXTNext.Sitefinity.Widgets.Authentication.Mvc.Models.UsersListExtended.UserDetailsExtendedViewModel

@using Telerik.Sitefinity;
@using Telerik.Sitefinity.Security.Model;
@using Telerik.Sitefinity.Security.Claims;
@using Telerik.Sitefinity.Frontend.Mvc.Helpers;
@using JXTNext.Sitefinity.Widgets.Authentication.Mvc.Models.UsersListExtended;
@using Telerik.Sitefinity.Security;

@{
    bool isAuthenticated = false;

    var user = ClaimsManager.GetCurrentIdentity();
    if (user != null)
    {
        isAuthenticated = user.IsAuthenticated;
    }
}
<div class="@Model.CssClass">
    @if (isAuthenticated)
    {
        <img src="@(((SitefinityProfileItemExtendedViewModel)Model.Item).AvatarImageUrl)" alt="@((Model.Item.DataItem as UserProfile).GetUserDisplayName())" width="100" height="100" />
        <h3>@((Model.Item.DataItem as UserProfile).GetUserDisplayName())</h3>
        <p>@((Model.Item.DataItem as UserProfile).User.Email)</p>
        <p>@Html.HtmlSanitize((((SitefinityProfileItemExtendedViewModel)Model.Item).About))</p>

     }
    else
    {
        <p>@Html.Resource("NotLoggedInUser")</p>
    }
</div>
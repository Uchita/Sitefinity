@model Telerik.Sitefinity.Frontend.Card.Mvc.Models.Card.CardViewModel
@using Telerik.Sitefinity.Frontend.Mvc.Helpers


@if (!Telerik.Sitefinity.Services.SystemManager.IsDesignMode || Telerik.Sitefinity.Services.SystemManager.IsPreviewMode)
{
    <div class="video-wrap">
        <div class="bgimg" style="background-image: url(@Model.SelectedSizeUrl);"></div>
        <div class="container">
            <div class="row align-items-center">
                <div class="col-12 text-center">
                    <a href="javascript:void(0)" class="play-btn" data-toggle="modal" data-target="#videoModal" data-theVideo="@Model.ActionUrl">
                        <i class="fa fa-play" aria-hidden="true"></i><span class="sr-only">Play video</span>
                    </a>
                    <h2 class="video-title">@Html.HtmlSanitize(Model.Heading)</h2>
                  
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="videoModal" tabindex="-1" role="dialog" aria-labelledby="videoModal" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-body">

                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    
                    <div class="video-bg">
                        <video width="100%" controls="" controlsList="nodownload"><source src="@Model.ActionUrl" type="video/mp4"></source></video>
                    </div>

                </div>
            </div>
        </div>
    </div>

}
else
{
    <div class="video-wrap" style="background-image:url('@Model.SelectedSizeUrl')">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-12 text-center">
                    <a href="javascript:void(0)" class="play-btn" data-toggle="modal" data-target="#videoModal" data-theVideo="@Model.ActionUrl">
                        <i class="fa fa-play" aria-hidden="true"></i><span class="sr-only">Play video</span>
                    </a>
                    <h2 class="video-title">@Html.HtmlSanitize(Model.Heading)</h2>
                    
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="videoModal" tabindex="-1" role="dialog" aria-labelledby="videoModal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <div>
                        <iframe width="100%" height="350" src="@Model.ActionUrl"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

}


<script src="/ResourcePackages/Bayside/assets/js/parlx-bg.js"></script>
<script>

    (function ($) {
        $(window).on("load resize scroll", function () {
            $('.bgimg').parlx(function () {
                speed: 0.1
            });
        });

        autoPlayYouTubeModal();

        //FUNCTION TO GET AND AUTO PLAY YOUTUBE VIDEO FROM DATATAG
        function autoPlayYouTubeModal() {
            var trigger = $("body").find('[data-toggle="modal"]');
            trigger.click(function () {
                var theModal = $(this).data("target"),
                    videoSRC = $(this).attr("data-theVideo"),
                    videoSRCauto = videoSRC + "?autoplay=1";
                $(theModal + ' iframe').attr('src', videoSRCauto);
                $(theModal + ' button.close').click(function () {
                    $(theModal + ' iframe').attr('src', videoSRC);
                });
            });
        }


    })(jQuery);

</script>

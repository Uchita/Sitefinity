@model Telerik.Sitefinity.Frontend.Navigation.Mvc.Models.INavigationModel
@using Telerik.Sitefinity.Frontend.Mvc.Helpers;
@using Telerik.Sitefinity.Frontend.Navigation.Mvc.Models;
@using Telerik.Sitefinity.Modules.Pages;
@using SitefinityWebApp.Helpers;
@*For user login check*@
@using JXTNext.Sitefinity.Common.Helpers;
@using Telerik.Sitefinity.DynamicModules.Model;

<nav class="navbar navbar-expand-lg navbar-light bg-white float-right">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav">
            @foreach (var parentNode in Model.Nodes)
            {
                if (parentNode.Url == "/specialist-recruitment-group")
                {
                    <li class="nav-item dropdown mega-menu">
                        <a class="nav-link dropdown-toggle" href="@parentNode.Url" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            @parentNode.Title
                        </a>
                        <div class="dropdown-menu">
                            <div class="row">

                                <!--Child Nodes-->


                                <div class="col-12 col-lg-4">
                                    @foreach (var childNode in parentNode.ChildNodes)
                                    {
                                        if (childNode.Url == "/specialist-recruitment-group/actions")
                                        {
                                            <a class="dropdown-item menu-heading" href="@childNode.Url">@childNode.Title</a>
                                            <ul>
                                                @foreach (var node in childNode.ChildNodes)
                                                {

                                                    <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                }
                                            </ul>

                                            @*<a class="dropdown-item menu-heading" href="#">Learn More</a>
                                                <ul>
                                                    <li><a class="dropdown-item" href="/contact">Contact Us</a></li>
                                                </ul>*@
                                        }
                                    }
                                </div>
                                @{
                                    List<NodeViewModel> listTopFive = new List<NodeViewModel>();
                                    List<NodeViewModel> listRemainingNodes = new List<NodeViewModel>();
                                    List<NodeViewModel> listAllNodes = new List<NodeViewModel>();
                                }
                                @foreach (var childNode in parentNode.ChildNodes)
                                {
                                    if (childNode.Url == "/specialist-recruitment")
                                    {
                                        <div class="col-12 col-lg-8">

                                            <a class="dropdown-item menu-heading" href="@childNode.Url">Visit the Brand Site</a>

                                            @if (childNode.ChildNodes.Count > 4)
                                            {
                                                listTopFive.AddRange(childNode.ChildNodes.Take(4));
                                                listRemainingNodes.AddRange(childNode.ChildNodes.Skip(4));
                                            }

                                            else
                                            {
                                                listAllNodes.AddRange(childNode.ChildNodes);
                                            }

                                            @if (listTopFive.Count > 0 && listRemainingNodes.Count > 0)
                                            {
                                                <div class="row">
                                                    <div class="col-12 col-lg-6">
                                                        <ul>
                                                            @foreach (var node in listTopFive)
                                                            {
                                                                <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                            }
                                                        </ul>
                                                    </div>
                                                    <div class="col-12 col-lg-6">
                                                        <ul>
                                                            @foreach (var node in listRemainingNodes)
                                                            {
                                                                <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                            }
                                                        </ul>
                                                    </div>

                                                </div>
                                            }
                                            else
                                            {
                                                <div class="row">

                                                    <div class="col-12 col-lg-6">
                                                        <ul>

                                                            @foreach (var node in listAllNodes)
                                                            {
                                                                <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                            }
                                                        </ul>
                                                    </div>
                                                    <div class="col-12 col-lg-6">
                                                        <ul></ul>
                                                    </div>

                                                </div>
                                            }

                                        </div>
                                    }
                                }

                            </div>
                        </div>
                    </li>
                }
                else if (parentNode.Title == "Jobs")
                {
                    <li class="nav-item dropdown mega-menu">
                        <a class="nav-link dropdown-toggle" href="@parentNode.Url" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            @parentNode.Title
                        </a>
                        <div class="dropdown-menu">
                            <div class="row">
                                <div class="col-12 col-lg-4">

                                    @foreach (var childnode in parentNode.ChildNodes)
                                    {

                                        if (childnode.Url == "/jobs/advancedsearch")
                                        {
                                            <a class="dropdown-item menu-heading" href="@childnode.Url">Job Search</a>
                                            <ul>
                                                <li><a class="dropdown-item" href="@childnode.Url">Find a job</a></li>
                                            </ul>
                                        }
                                        if (childnode.Url == "/jobs/job-application-tool")
                                        {

                                            <a class="dropdown-item menu-heading" href="@childnode.Url">@childnode.Title</a>
                                            <ul>
                                                @foreach (var subchildnode in childnode.ChildNodes)
                                                {
                                                    <li><a class="dropdown-item" href="@subchildnode.Url">@subchildnode.Title</a></li>
                                                }
                                            </ul>
                                        }
                                    }
                                </div>


                                <div class="col-12 col-lg-8">
                                    @{
                                        List<NodeViewModel> listTopTen = new List<NodeViewModel>();
                                        List<NodeViewModel> listRemainingNodes1 = new List<NodeViewModel>();
                                        List<NodeViewModel> listAllNodes1 = new List<NodeViewModel>();
                                    }
                                    @foreach (var childNode1 in parentNode.ChildNodes)
                                    {



                                        if (childNode1.Url == "/jobs/specialist-jobs-new")
                                        {
                                            <a class="dropdown-item menu-heading" href="@childNode1.Url">@childNode1.Title</a>


                                            if (childNode1.ChildNodes.Count > 10)
                                            {
                                                listTopTen.AddRange(childNode1.ChildNodes.Take(10));
                                                listRemainingNodes1.AddRange(childNode1.ChildNodes.Skip(10));
                                            }
                                            else
                                            {
                                                listAllNodes1.AddRange(childNode1.ChildNodes);
                                            }
                                            @*<p>@listTopTen.Count</p>
                                                <p>@listRemainingNodes1.Count</p>
                                                <p>@listAllNodes1.Count</p>*@

                                            if (listTopTen.Count > 0 && listRemainingNodes1.Count > 0)
                                            {
                                                <div class="row">
                                                    <div class="col-12 col-lg-6">
                                                        <ul>
                                                            @foreach (var node in listTopTen)
                                                            {
                                                                <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                            }
                                                        </ul>
                                                    </div>
                                                    <div class="col-12 col-lg-6">
                                                        <ul>
                                                            @foreach (var node in listRemainingNodes1)
                                                            {
                                                                <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                            }
                                                        </ul>


                                                        <a class="dropdown-item menu-heading" href="#">Learn More</a>
                                                        <ul>
                                                            <li><a class="dropdown-item" href="/contact">Contact Us</a></li>
                                                        </ul>
                                                    </div>

                                                </div>
                                            }
                                            else
                                            {
                                                <div class="row">
                                                    <div class="col-12 col-lg-6">
                                                        <ul>
                                                            @foreach (var node in listAllNodes1)
                                                            {
                                                                <li><a class="dropdown-item" href="">@node.Title</a></li>
                                                            }
                                                        </ul>
                                                    </div>
                                                    <div class="col-12 col-lg-6">
                                                        <ul></ul>
                                                    </div>
                                                </div>
                                            }
                                        }

                                    }

                                </div>
                            </div>
                        </div>
                    </li>

                }
                else if (parentNode.Url == "/employer-services")
                {
                    <li class="nav-item dropdown mega-menu">
                        <a class="nav-link dropdown-toggle" href="@parentNode.Url" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            @parentNode.Title
                        </a>
                        <div class="dropdown-menu">
                            <div class="row">
                                @foreach (var childnode in parentNode.ChildNodes)
                                {

                                    if (childnode.Url == "/employer-services/partnering-with-employers")
                                    {
                                        <div class="col-12 col-lg-4">
                                            <a class="dropdown-item menu-heading" href="@childnode.Url">@childnode.Title</a>
                                            <ul>
                                                @foreach (var node in childnode.ChildNodes)
                                                {
                                                    <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                }
                                            </ul>
                                        </div>
                                    }
                                    else if (childnode.Url == "/employer-services/what-we-do")
                                    {
                                        <div class="col-12 col-lg-4">
                                            <a class="dropdown-item menu-heading" href="@childnode.Url">@childnode.Title</a>
                                            <ul>
                                                @foreach (var node in childnode.ChildNodes)
                                                {
                                                    <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                }
                                            </ul>
                                        </div>
                                    }
                                }
                                <div class="col-12 col-lg-4">
                                    <a class="dropdown-item menu-heading" href="#">Learn More</a>
                                    <ul>
                                        <li><a class="dropdown-item" href="/contact">Contact Us</a></li>
                                    </ul>
                                </div>



                            </div>
                        </div>
                    </li>
                }
                else if (parentNode.Url == "/resources")
                {
                    <li class="nav-item dropdown mega-menu">
                        <a class="nav-link dropdown-toggle" href="@parentNode.Url" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            @parentNode.Title
                        </a>
                        <div class="dropdown-menu">
                            <div class="row">
                                @foreach (var childnode in parentNode.ChildNodes)
                                {

                                    if (childnode.Url == "/resources/career-new")
                                    {

                                        <div class="col-12 col-lg-4">
                                            <a class="dropdown-item menu-heading" href="@childnode.Url">@childnode.Title</a>
                                            <ul>
                                                @foreach (var node in childnode.ChildNodes)
                                                {
                                                    <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                }
                                            </ul>
                                        </div>
                                    }
                                    else if (childnode.Url == "/resources/workplace-relations-new")
                                    {

                                        <div class="col-12 col-lg-4">
                                            <a class="dropdown-item menu-heading" href="@childnode.Url">@childnode.Title</a>
                                            <ul>
                                                @foreach (var node in childnode.ChildNodes)
                                                {
                                                    <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                }
                                            </ul>
                                        </div>
                                    }
                                    else if (childnode.Url == "/resources/employer-new")
                                    {

                                        <div class="col-12 col-lg-4">
                                            <a class="dropdown-item menu-heading" href="@childnode.Url">@childnode.Title</a>
                                            <ul>
                                                @foreach (var node in childnode.ChildNodes)
                                                {
                                                    <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                }
                                            </ul>

                                            <a class="dropdown-item menu-heading" href="#">Learn More</a>
                                            <ul>
                                                <li><a class="dropdown-item" href="/contact">Contact Us</a></li>
                                            </ul>

                                        </div>
                                    }
                                }
                            </div>
                        </div>
                    </li>
                }
                else if (parentNode.Url == "/about")
                {
                    <li class="nav-item dropdown mega-menu">
                        <a class="nav-link dropdown-toggle" href="@parentNode.Url" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            @parentNode.Title
                        </a>
                        <div class="dropdown-menu">
                            <div class="row">
                                @foreach (var childnode in parentNode.ChildNodes)
                                {

                                    if (childnode.Url == "/about/about-us")
                                    {

                                        <div class="col-12 col-lg-4">
                                            <a class="dropdown-item menu-heading" href="@childnode.Url">@childnode.Title</a>
                                            <ul>
                                                @foreach (var node in childnode.ChildNodes)
                                                {
                                                    <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                }
                                            </ul>
                                        </div>
                                    }
                                    else if (childnode.Url == "/about/work-for-us")
                                    {

                                        <div class="col-12 col-lg-4">
                                            <a class="dropdown-item menu-heading" href="@childnode.Url">@childnode.Title</a>
                                            <ul>
                                                @foreach (var node in childnode.ChildNodes)
                                                {
                                                    <li><a class="dropdown-item" href="@node.Url">@node.Title</a></li>
                                                }
                                            </ul>
                                        </div>
                                    }

                                }

                                <div class="col-12 col-lg-4">
                                    <a class="dropdown-item menu-heading" href="#">Learn More</a>
                                    <ul>
                                        <li><a class="dropdown-item" href="/contact">Contact Us</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </li>
                }
                else
                {
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle " href="@parentNode.Url" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            @parentNode.Title
                        </a>
                        <div class="dropdown-menu">
                            @foreach (var node in parentNode.ChildNodes)
                            {
                                <a class="dropdown-item " href="@node.Url">@node.Title</a>
                            }
                        </div>
                    </li>
                }


            }
        </ul>
    </div>
</nav>

@helper GetClass(NodeViewModel node)
{

    if (node.IsCurrentlyOpened)
    {
        @Html.Raw("active");
    }
    else if (node.HasChildOpen)
    {
        @Html.Raw("active");
    }
}
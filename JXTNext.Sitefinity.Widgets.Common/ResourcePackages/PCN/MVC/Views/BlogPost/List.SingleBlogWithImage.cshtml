@model Telerik.Sitefinity.Frontend.Mvc.Models.ContentListViewModel

@using Telerik.Sitefinity;
@using Telerik.Sitefinity.Frontend.Blogs.Mvc.Helpers;
@using Telerik.Sitefinity.Frontend.Blogs.Mvc.Models.Blog;
@using Telerik.Sitefinity.Frontend.Mvc.Helpers;
@using Telerik.Sitefinity.Frontend.Mvc.Models;
@using Telerik.Sitefinity.Modules.Pages;
@using Telerik.Sitefinity.Model;
@using Telerik.Sitefinity.Taxonomies;
@using Telerik.Sitefinity.Taxonomies.Model;
@using Telerik.Sitefinity.Web.DataResolving;
@using Telerik.Sitefinity.DynamicModules.Model;


@Html.Script(ScriptRef.JQuery, "top", false)

@{
    var singleblog = Model.Items.FirstOrDefault();
    var imageurl = "";
    var navigateUrl = "#";
    if (singleblog != null)
    {
        foreach (var relatedItem in singleblog.Fields.BlogImage)
        {
            imageurl = (string)relatedItem.Fields.ItemDefaultUrl;
        }
        navigateUrl = HyperLinkHelpers.GetDetailPageUrl(singleblog, ViewBag.DetailsPageId, ViewBag.OpenInSamePage);
    }
}
@if (singleblog != null)
{
    <div class="article @Model.CssClass">
        <div class="image">
            <a href="@navigateUrl"><img src="@imageurl" alt="image"></a>
        </div>
        <div class="text">
            <div class="sub">
                <h4 class="sub_title"><a @Html.InlineEditingFieldAttributes("Title", "ShortText") href="@navigateUrl">@singleblog.Fields.Title</a></h4>
                <div class="date_author">
                    By
                    <strong>@Html.HtmlSanitize((string)singleblog.Fields.AuthorName)</strong> | @singleblog.GetDateTime("PublicationDate", "MMM, d yyyy, HH:mm tt")
                </div>
                <p>@Html.HtmlSanitize((string)singleblog.Fields.Summary)</p>
                <a href="@navigateUrl" class="action_link">Read More</a>

                @if (singleblog.Fields.Category != null)
                {
                    foreach (var taxon in singleblog.GetHierarchicalTaxons("Category"))
                    {<br /><br />
                        var url = "/news/blogs/-in-category/categories" + @taxon.FullUrl;
                        <span class="cat">
                            <span class="main-color-bg cat5"></span><a href="@url">@taxon.Title.ToString()</a>
                        </span>
                    }
                }
            </div>
        </div>

    </div>
}
else
{
    <div class="alert alert-warning"><strong>No results found.</strong></div>
}
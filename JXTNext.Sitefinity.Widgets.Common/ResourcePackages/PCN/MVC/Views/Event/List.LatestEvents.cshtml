@model Telerik.Sitefinity.Frontend.Mvc.Models.ContentListViewModel

@using Telerik.Sitefinity.Frontend.Events.Mvc.Helpers
@using Telerik.Sitefinity.Frontend.Mvc.Helpers
@using Telerik.Sitefinity.Modules.Pages
@using Telerik.Sitefinity.Web.DataResolving

@Html.Script(ScriptRef.JQuery, "top", false)
<div class="sidebar-latest-events">
    <div class="sidebar-cat-title">
        <h4>Highlighted events</h4>
    </div>
    @foreach (var item in Model.Items)
    {
        var imageurl = "";
        foreach (var relatedItem in item.Fields.EventImage)
        {
            imageurl = (string)relatedItem.Fields.ItemDefaultUrl;
        }
        var navigateUrl = HyperLinkHelpers.GetDetailPageUrl(item, ViewBag.DetailsPageId, ViewBag.OpenInSamePage, Model.UrlKeyPrefix);

        <div class="latest-event-list">
            <div class="event-title">
                <a @Html.InlineEditingFieldAttributes("Title", "ShortText") href="@navigateUrl">@item.Fields.Title</a>
            </div>
            <div class="event-date">@item.GetDateTime("EventStart", "MMM d, yyyy") to @item.GetDateTime("EventEnd", "MMM d, yyyy")</div>
            <a class="btn-link" href="@navigateUrl">VIEW LINK</a>
        </div>
    }
</div>



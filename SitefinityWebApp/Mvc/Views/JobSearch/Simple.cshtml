@model List<SitefinityWebApp.Mvc.Models.JobSearchModel>
@using SitefinityWebApp.Mvc.Models

<br />


@functions {
    List<string> _itemsList = new List<string>();
    Dictionary<string, dynamic> _idNamesLevelsPair = new Dictionary<string, dynamic>();

    public List<string> GetValuesList(List<JobSearchItem> searchItemsList)
    {

        foreach (var item in searchItemsList)
        {
            if (!string.IsNullOrEmpty(item.Label) && item.Selected == true)
            {
                _itemsList.Add(item.Label);
                _idNamesLevelsPair.Add(item.Id, new { name = item.Label, level = item.Level });
            }
            if (item.Data != null)
                GetValuesList(item.Data);
        }

        return _itemsList;
    }
}
<div class="container">
    <div class="row">
        <ul class="form-group list-inline">
            @if (Model != null)
            {
                foreach (var item in Model)
                {
                    switch (item.ControlType)
                    {
                        case "TextBox":
                            <li><input type="text" class="form-control" placeholder="@item.PlaceholderText" /></li>
                            break;

                        case "DropDown Single":
                            // Makre sure that clear the list
                            _itemsList.Clear();
                            _idNamesLevelsPair.Clear();

                            GetValuesList(item.Data);
                            <li>
                                <select class="form-control">
                                    @foreach (dynamic itemName in _idNamesLevelsPair)
                                    {
                                        <option>@itemName.Value.name</option>
                                    }
                                </select>
                            </li>
                            break;

                        case "DropDown Multi":
                            break;

                        case "Map Search":
                            break;

                        default:
                            break;
                    }
                }
                <li><button class="btn btn-primary">Job Search</button></li>
            }
        </ul>
    </div>
</div>

<br />
<br />




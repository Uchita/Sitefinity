@model Telerik.Sitefinity.Frontend.Navigation.Mvc.Models.SiteSelector.SiteSelectorViewModel

@using Telerik.Sitefinity.Frontend.Navigation.Mvc.Models.SiteSelector;
@using Telerik.Sitefinity.Services;
@using Telerik.Sitefinity.Frontend.Mvc.Helpers;
@using Telerik.Sitefinity.Modules.Pages;

<div class="o-site-selector @(!SystemManager.IsDesignMode ? "js-site-selector" : "") @Model.CssClass">
    <label>
        @Html.Resource("Sites")

        <select>
            @if (!Model.IncludeCurrentSite)
            {
                <option>@Html.Resource("SelectSite")</option>
            }

            @{
                string currentSite = string.Empty;
            }

            @foreach (var site in Model.Sites)
            {
                if (!Model.EachLanguageAsSeparateSite)
                {
                    <option value="@site.Url" @(site.IsCurrent ? "selected=\"selected\"" : "")>@site.Name</option>
                }
                else if (Model.SiteLanguagesDisplayMode == SiteLanguagesDisplayMode.SiteNamesAndLanguages)
                {
                    <option value="@site.Url" @(site.IsCurrent ? "selected=\"selected\"" : "")>@site.Name - @site.Language</option>
                }
                else
                {
                    if (currentSite != site.Name)
                    {
                        <option value="">- @site.Name -</option>
                        currentSite = site.Name;
                    }

                    <option value="@site.Url" @(site.IsCurrent ? "selected=\"selected\"" : "")>@site.Language</option>
                }
            }
        </select>
    </label>
</div>

@Html.Script(Url.WidgetContent("Mvc/Scripts/SiteSelector/site-selector.js"), "bottom", false)
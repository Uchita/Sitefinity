@model Telerik.Sitefinity.Frontend.Forms.Mvc.Models.Fields.FileField.FileFieldViewModel

@using Telerik.Sitefinity.Frontend.Mvc.Helpers;
@using Telerik.Sitefinity.Modules.Pages;
@using Telerik.Sitefinity.Services;

@Html.Script(ScriptRef.JQuery, "top", false)

<fieldset class="@Model.CssClass sf-FileField o-upload" data-sf-role="file-field-container" data-sf-config="@(Html.AttributeEncode(Model.Serialize()))">
    <legend>@Model.MetaField.Title</legend>
    <p class="text-danger" data-sf-role="required-violation-message" style="display: none;">@Model.RequiredViolationMessage</p>
    @if (!string.IsNullOrEmpty(Model.MetaField.Description))
    {
        <p class="text-muted">@Model.MetaField.Description</p>
    }
    <div data-sf-role="file-field-inputs">
        @if (!SystemManager.IsDesignMode)
        {
            @:<script type="text/template" data-sf-role="file-input-template">
            }
        <div data-sf-role="single-file-input">
            <input title="file" type="file" name="@(Model.MetaField.FieldName)" @Html.Raw(Model.ValidationAttributes) class="sf-FileField-input" />
            @if (Model.AllowMultipleFiles)
            {
                <span style="display: none;" data-sf-role="remove-input" class="sf-icon-remove"></span>
            }

            @if (Model.AcceptedFileTypes.Length > 0)
            {
                <div class="callout small alert" data-sf-role="filetype-violation-message" style="display: none;">@Model.FileTypeViolationMessage</div>
            }
            @if (Model.MinFileSizeInMb > 0 || Model.MaxFileSizeInMb > 0)
            {
                <div class="callout small alert" data-sf-role="filesize-violation-message" style="display: none;">@Model.FileSizeViolationMessage</div>
            }
        </div>
        @if (!SystemManager.IsDesignMode)
        {
        @:</script>
    }

    @* File inputs will be generated here *@
    </div>

    @if (Model.AllowMultipleFiles)
    {
        <a href="javascript:void(0);" data-sf-role="add-input" class="button tiny">@Html.Resource("AddAnother")</a>
    }
</fieldset>

@if (!SystemManager.IsDesignMode)
{
    @Html.Script(Url.WidgetContent("Mvc/Scripts/FileField/file-field.js"), "bottom", false)
}